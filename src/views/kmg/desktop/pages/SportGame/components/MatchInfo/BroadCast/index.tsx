import styles from './style.scss';
import useMatchDetail from '@core/hooks/sports/useMatchDetail';
import DpMatchEvent from './MatchEvent';
import IStore from '@core/reducers/_reduxStore';
import DpImage from '@views/kmg/desktop/components/Image';
import useMsgWebSocket from '@core/hooks/sports/useMsgWebSocket';
import {useSelector} from 'react-redux';
import {ESportType} from '@core/constants/enum/sport';

const basketballResult = [
  {
    score: '暂停',
    icon: require('../i/zhan-ting.svg'),
  },
  {
    score: '犯规',
    icon: require('../i/fan-gui-b.svg'),
  },
  {
    score: '进球',
    icon: require('../i/er-fen-de-fen.svg'),
  },
  {
    score: '未中',
    icon: require('../i/fa-qiu-wei-zhong.svg'),
  },
  {
    score: '罚球',
    icon: require('../i/fa-qiu.svg'),
  },
];
const BroadCast = () => {
  const msgList = useSelector((state: IStore) => state.sport.msgLiveList);
  const {matchDetail, getTextLive} = useMatchDetail();
  const {initConnect} =useMsgWebSocket();
  React.useEffect(() => {
    if (_.isEmpty(matchDetail)) return;
    getTextLive(matchDetail.vid);
    initConnect(matchDetail.vid);
  }, [matchDetail && matchDetail.vid]);
  if (matchDetail && ![ESportType.FOOTBALL, ESportType.BASKETBALL].includes(matchDetail.sportId)) return null;
  return (
    <div className={styles.broadCast}>
      <div className='match-statistics'>
        <div className="header">文字直播</div>
        <div className='main'>
          <div className='team-info'>
            <div className='team-board'>
              <div className='team-item'>
                <span className='team-mark'>
                  <DpImage type='team' src={matchDetail?.teams.home.icon} size={48} />
                </span>
                <span className='team-name'>{matchDetail?.teams.home.name}</span>
              </div>
              <div className='team-item'>
                <span className='team-name'>{matchDetail?.teams.away.name}</span>
                <span className='team-mark'>
                  <DpImage type='team' src={matchDetail?.teams.away.icon} size={48} />
                </span>
              </div>
            </div>
          </div>
          <div className='event-view'>
            <DpMatchEvent eventList={msgList}/>
          </div>
          <div className='des'>
            {
              matchDetail?.isLive &&
              <div className='item'>
                <span className='item-ico'>
                  <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 26 26" fill="none">
                    <path d="M18.1438 5.17006C17.9615 5.17006 17.8082 5.10792 17.6839 4.98364C17.5597 4.85936 17.4561 4.71437 17.3732 4.54866C17.2904 4.38295 17.2282 4.21311 17.1868 4.03912C17.1454 3.86513 17.1247 3.72013 17.1247 3.60414V0.546875H17.1744C17.3235 0.546875 17.4644 0.563446 17.5969 0.596587C17.7295 0.629728 17.8911 0.708438 18.0816 0.832717C18.2722 0.956996 18.5042 1.13099 18.7776 1.35469C19.051 1.57839 19.3948 1.87252 19.8091 2.23707C20.2565 2.63476 20.6128 2.97032 20.8779 3.24373C21.143 3.51714 21.346 3.74913 21.4869 3.93969C21.6277 4.13025 21.7147 4.29182 21.7479 4.42438C21.781 4.55695 21.7976 4.67294 21.7976 4.77236V5.17006H18.1438ZM25.8739 16.8771C25.9236 17.0097 25.9568 17.1754 25.9733 17.3743C25.9899 17.5731 25.9071 17.7637 25.7248 17.9459C25.6419 18.0288 25.5674 18.1075 25.5011 18.1821C25.4348 18.2566 25.3768 18.3188 25.3271 18.3685C25.2608 18.4348 25.2028 18.4845 25.1531 18.5176L23.0404 16.4297C23.1398 16.3469 23.2516 16.2475 23.3759 16.1315C23.5002 16.0155 23.6038 15.9243 23.6866 15.8581C23.8855 15.6758 24.1009 15.5971 24.3329 15.6219C24.5648 15.6468 24.7554 15.7006 24.9045 15.7835C25.0703 15.8663 25.2484 16.0113 25.4389 16.2185C25.6295 16.4256 25.7745 16.6452 25.8739 16.8771ZM17.0998 19.1887C17.4644 19.1887 17.7709 19.0893 18.0195 18.8905L13.1975 23.9113H6.33726C6.02242 23.9113 5.67858 23.8202 5.30574 23.6379C4.93291 23.4556 4.58492 23.2154 4.2618 22.9171C3.93867 22.6188 3.6694 22.275 3.45398 21.8856C3.23857 21.4962 3.13086 21.0943 3.13086 20.6801V3.75327C3.13086 3.40529 3.20957 3.04074 3.36699 2.65962C3.52441 2.2785 3.73983 1.93466 4.01324 1.6281C4.28665 1.32155 4.59735 1.0647 4.94533 0.857573C5.29331 0.650441 5.65787 0.546875 6.03899 0.546875H15.5588V3.65385C15.5588 3.96869 15.6085 4.30839 15.7079 4.67294C15.8073 5.03749 15.9606 5.37304 16.1677 5.6796C16.3749 5.98615 16.6441 6.243 16.9755 6.45013C17.307 6.65726 17.7046 6.76083 18.1686 6.76083H21.7976V14.9881L18.3923 18.5176C18.5746 18.2525 18.6657 17.9625 18.6657 17.6477C18.6657 17.2168 18.5125 16.8481 18.2059 16.5416C17.8994 16.235 17.5307 16.0818 17.0998 16.0818H7.7789C7.34806 16.0818 6.98351 16.235 6.68524 16.5416C6.38697 16.8481 6.23784 17.2168 6.23784 17.6477C6.23784 18.0785 6.38697 18.4431 6.68524 18.7413C6.98351 19.0396 7.34806 19.1887 7.7789 19.1887H17.0998ZM7.7789 9.8678C7.34806 9.8678 6.98351 10.0211 6.68524 10.3276C6.38697 10.6342 6.23784 11.0029 6.23784 11.4337C6.23784 11.8646 6.38697 12.2291 6.68524 12.5274C6.98351 12.8256 7.34806 12.9748 7.7789 12.9748H17.0998C17.5307 12.9748 17.8994 12.8256 18.2059 12.5274C18.5125 12.2291 18.6657 11.8646 18.6657 11.4337C18.6657 11.0029 18.5125 10.6342 18.2059 10.3276C17.8994 10.0211 17.5307 9.8678 17.0998 9.8678H7.7789ZM17.1495 22.3206L17.4727 21.9974L18.0941 21.376C18.3426 21.1275 18.616 20.8499 18.9143 20.5434C19.2126 20.2368 19.5108 19.9344 19.8091 19.6361C20.5216 18.9236 21.3253 18.1282 22.2201 17.25L24.308 19.3379L21.897 21.7489L21.0022 22.6437L20.1819 23.4639C19.95 23.6959 19.7553 23.8948 19.5978 24.0605C19.4404 24.2262 19.3534 24.3173 19.3368 24.3339C19.254 24.4002 19.1629 24.4706 19.0634 24.5452C18.964 24.6197 18.8646 24.6819 18.7652 24.7316C18.6657 24.7813 18.5125 24.8434 18.3053 24.918C18.0982 24.9926 17.8869 25.063 17.6715 25.1293C17.4561 25.1956 17.249 25.2535 17.0501 25.3033C16.8513 25.353 16.7021 25.3861 16.6027 25.4027C16.4039 25.4358 16.2713 25.411 16.205 25.3281C16.1387 25.2453 16.1222 25.1044 16.1553 24.9056C16.1719 24.8061 16.205 24.657 16.2547 24.4582C16.3044 24.2593 16.3624 24.0563 16.4287 23.8492C16.495 23.6421 16.5571 23.4474 16.6151 23.2651C16.6731 23.0828 16.7187 22.9585 16.7518 22.8922C16.8513 22.6768 16.9838 22.4863 17.1495 22.3206Z" fill="#2388FF"/>
                  </svg>
                </span>
                <span className='content'>
                  本场比赛场地情况：良好
                </span>
              </div>
            }
            <div className='item'>
              <span className='item-ico'>
                <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 26 26" fill="none">
                  <path d="M18.1438 5.17006C17.9615 5.17006 17.8082 5.10792 17.6839 4.98364C17.5597 4.85936 17.4561 4.71437 17.3732 4.54866C17.2904 4.38295 17.2282 4.21311 17.1868 4.03912C17.1454 3.86513 17.1247 3.72013 17.1247 3.60414V0.546875H17.1744C17.3235 0.546875 17.4644 0.563446 17.5969 0.596587C17.7295 0.629728 17.8911 0.708438 18.0816 0.832717C18.2722 0.956996 18.5042 1.13099 18.7776 1.35469C19.051 1.57839 19.3948 1.87252 19.8091 2.23707C20.2565 2.63476 20.6128 2.97032 20.8779 3.24373C21.143 3.51714 21.346 3.74913 21.4869 3.93969C21.6277 4.13025 21.7147 4.29182 21.7479 4.42438C21.781 4.55695 21.7976 4.67294 21.7976 4.77236V5.17006H18.1438ZM25.8739 16.8771C25.9236 17.0097 25.9568 17.1754 25.9733 17.3743C25.9899 17.5731 25.9071 17.7637 25.7248 17.9459C25.6419 18.0288 25.5674 18.1075 25.5011 18.1821C25.4348 18.2566 25.3768 18.3188 25.3271 18.3685C25.2608 18.4348 25.2028 18.4845 25.1531 18.5176L23.0404 16.4297C23.1398 16.3469 23.2516 16.2475 23.3759 16.1315C23.5002 16.0155 23.6038 15.9243 23.6866 15.8581C23.8855 15.6758 24.1009 15.5971 24.3329 15.6219C24.5648 15.6468 24.7554 15.7006 24.9045 15.7835C25.0703 15.8663 25.2484 16.0113 25.4389 16.2185C25.6295 16.4256 25.7745 16.6452 25.8739 16.8771ZM17.0998 19.1887C17.4644 19.1887 17.7709 19.0893 18.0195 18.8905L13.1975 23.9113H6.33726C6.02242 23.9113 5.67858 23.8202 5.30574 23.6379C4.93291 23.4556 4.58492 23.2154 4.2618 22.9171C3.93867 22.6188 3.6694 22.275 3.45398 21.8856C3.23857 21.4962 3.13086 21.0943 3.13086 20.6801V3.75327C3.13086 3.40529 3.20957 3.04074 3.36699 2.65962C3.52441 2.2785 3.73983 1.93466 4.01324 1.6281C4.28665 1.32155 4.59735 1.0647 4.94533 0.857573C5.29331 0.650441 5.65787 0.546875 6.03899 0.546875H15.5588V3.65385C15.5588 3.96869 15.6085 4.30839 15.7079 4.67294C15.8073 5.03749 15.9606 5.37304 16.1677 5.6796C16.3749 5.98615 16.6441 6.243 16.9755 6.45013C17.307 6.65726 17.7046 6.76083 18.1686 6.76083H21.7976V14.9881L18.3923 18.5176C18.5746 18.2525 18.6657 17.9625 18.6657 17.6477C18.6657 17.2168 18.5125 16.8481 18.2059 16.5416C17.8994 16.235 17.5307 16.0818 17.0998 16.0818H7.7789C7.34806 16.0818 6.98351 16.235 6.68524 16.5416C6.38697 16.8481 6.23784 17.2168 6.23784 17.6477C6.23784 18.0785 6.38697 18.4431 6.68524 18.7413C6.98351 19.0396 7.34806 19.1887 7.7789 19.1887H17.0998ZM7.7789 9.8678C7.34806 9.8678 6.98351 10.0211 6.68524 10.3276C6.38697 10.6342 6.23784 11.0029 6.23784 11.4337C6.23784 11.8646 6.38697 12.2291 6.68524 12.5274C6.98351 12.8256 7.34806 12.9748 7.7789 12.9748H17.0998C17.5307 12.9748 17.8994 12.8256 18.2059 12.5274C18.5125 12.2291 18.6657 11.8646 18.6657 11.4337C18.6657 11.0029 18.5125 10.6342 18.2059 10.3276C17.8994 10.0211 17.5307 9.8678 17.0998 9.8678H7.7789ZM17.1495 22.3206L17.4727 21.9974L18.0941 21.376C18.3426 21.1275 18.616 20.8499 18.9143 20.5434C19.2126 20.2368 19.5108 19.9344 19.8091 19.6361C20.5216 18.9236 21.3253 18.1282 22.2201 17.25L24.308 19.3379L21.897 21.7489L21.0022 22.6437L20.1819 23.4639C19.95 23.6959 19.7553 23.8948 19.5978 24.0605C19.4404 24.2262 19.3534 24.3173 19.3368 24.3339C19.254 24.4002 19.1629 24.4706 19.0634 24.5452C18.964 24.6197 18.8646 24.6819 18.7652 24.7316C18.6657 24.7813 18.5125 24.8434 18.3053 24.918C18.0982 24.9926 17.8869 25.063 17.6715 25.1293C17.4561 25.1956 17.249 25.2535 17.0501 25.3033C16.8513 25.353 16.7021 25.3861 16.6027 25.4027C16.4039 25.4358 16.2713 25.411 16.205 25.3281C16.1387 25.2453 16.1222 25.1044 16.1553 24.9056C16.1719 24.8061 16.205 24.657 16.2547 24.4582C16.3044 24.2593 16.3624 24.0563 16.4287 23.8492C16.495 23.6421 16.5571 23.4474 16.6151 23.2651C16.6731 23.0828 16.7187 22.9585 16.7518 22.8922C16.8513 22.6768 16.9838 22.4863 17.1495 22.3206Z" fill="#2388FF"/>
                </svg>
              </span>
              <span className='content'>
                大家好，欢迎收看本场比赛直播，球员们正在热身，比赛即将开始
              </span>
            </div>
          </div>
          <div className='event-result'>
            {
              matchDetail?.sportId === ESportType.BASKETBALL &&
              <div className="event-overview">
                {
                  basketballResult.map((item, idx) => {
                    return (
                      <div key={idx} className='event-item'>
                        <div>
                          <img src={item['icon']} className='event-img'/>
                        </div>
                        <div className='event-score'>
                          {item.score}
                        </div>
                      </div>
                    );
                  })
                }
              </div>
            }
          </div>
        </div>
      </div>
      <div>
      </div>
    </div>
  );
};

export default BroadCast;
